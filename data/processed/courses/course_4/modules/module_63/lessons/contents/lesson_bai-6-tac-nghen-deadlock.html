<h1>ğŸ§© BÃ€I 6 â€“ Táº®C NGHáº¼N (DEADLOCK)</h1><h2>ğŸ¯ Má»¥c tiÃªu há»c táº­p</h2><ul><li>Hiá»ƒu khÃ¡i niá»‡m táº¯c ngháº½n vÃ  cÃ¡c Ä‘iá»u kiá»‡n dáº«n Ä‘áº¿n deadlock.</li><li>PhÃ¢n biá»‡t giá»¯a ngÄƒn cháº·n, trÃ¡nh, phÃ¡t hiá»‡n vÃ  phá»¥c há»“i táº¯c ngháº½n.</li><li>PhÃ¢n tÃ­ch giáº£i thuáº­t ngÃ¢n hÃ ng (Bankerâ€™s Algorithm) vÃ  á»©ng dá»¥ng thá»±c táº¿.</li><li>Biáº¿t cÃ¡ch mÃ´ phá»ng, nháº­n biáº¿t vÃ  xá»­ lÃ½ tÃ¬nh huá»‘ng deadlock trong há»‡ thá»‘ng Ä‘a tiáº¿n trÃ¬nh.</li></ul><hr><h2>6.1 KHÃI NIá»†M Táº®C NGHáº¼N</h2><p><b>Táº¯c ngháº½n (Deadlock)</b> xáº£y ra khi má»™t nhÃ³m tiáº¿n trÃ¬nh bá»‹ cháº·n vÄ©nh viá»…n vÃ¬ má»—i tiáº¿n trÃ¬nh giá»¯ tÃ i nguyÃªn mÃ  tiáº¿n trÃ¬nh khÃ¡c cáº§n.</p><p>VÃ­ dá»¥: Tiáº¿n trÃ¬nh P1 giá»¯ tÃ i nguyÃªn R1 vÃ  cáº§n R2; P2 giá»¯ R2 vÃ  cáº§n R1 â†’ Cáº£ hai Ä‘á»u chá» nhau vÃ´ thá»i háº¡n.</p><hr><h2>6.2 Bá»N ÄIá»€U KIá»†N Cáº¦N Cá»¦A DEADLOCK (COFFMAN)</h2><ul><li><b>Loáº¡i trá»« tÆ°Æ¡ng há»— (Mutual Exclusion):</b> Má»™t tÃ i nguyÃªn chá»‰ Ä‘Æ°á»£c dÃ¹ng bá»Ÿi má»™t tiáº¿n trÃ¬nh táº¡i má»™t thá»i Ä‘iá»ƒm.</li><li><b>Giá»¯ vÃ  chá» (Hold and Wait):</b> Tiáº¿n trÃ¬nh Ä‘ang giá»¯ tÃ i nguyÃªn váº«n yÃªu cáº§u thÃªm tÃ i nguyÃªn khÃ¡c.</li><li><b>KhÃ´ng thu há»“i (No Preemption):</b> TÃ i nguyÃªn khÃ´ng thá»ƒ bá»‹ thu há»“i cÆ°á»¡ng bá»©c.</li><li><b>Chá» vÃ²ng (Circular Wait):</b> Tá»“n táº¡i chu trÃ¬nh cÃ¡c tiáº¿n trÃ¬nh chá» nhau.</li></ul><p>Náº¿u má»™t trong bá»‘n Ä‘iá»u kiá»‡n bá»‹ phÃ¡ vá»¡ â†’ há»‡ thá»‘ng trÃ¡nh Ä‘Æ°á»£c deadlock.</p><hr><h2>6.3 NGÄ‚N CHáº¶N Táº®C NGHáº¼N</h2><p>PhÃ¡ vá»¡ Ã­t nháº¥t má»™t trong bá»‘n Ä‘iá»u kiá»‡n:</p><ul><li><b>PhÃ¡ vá»¡ Hold and Wait:</b> YÃªu cáº§u táº¥t cáº£ tÃ i nguyÃªn cÃ¹ng lÃºc.</li><li><b>PhÃ¡ vá»¡ No Preemption:</b> Cho phÃ©p thu há»“i tÃ i nguyÃªn khi cáº§n.</li><li><b>PhÃ¡ vá»¡ Circular Wait:</b> GÃ¡n thá»© tá»± toÃ n cá»¥c cho tÃ i nguyÃªn vÃ  buá»™c tiáº¿n trÃ¬nh yÃªu cáº§u theo thá»© tá»± tÄƒng.</li></ul><hr><h2>6.4 TRÃNH Táº®C NGHáº¼N</h2><p>Sá»­ dá»¥ng <b>tráº¡ng thÃ¡i an toÃ n (Safe State)</b>. Há»‡ thá»‘ng chá»‰ cáº¥p phÃ¡t tÃ i nguyÃªn náº¿u váº«n duy trÃ¬ Ä‘Æ°á»£c tráº¡ng thÃ¡i an toÃ n â€“ nghÄ©a lÃ  cÃ³ Ã­t nháº¥t má»™t thá»© tá»± hoÃ n thÃ nh cho má»i tiáº¿n trÃ¬nh.</p><h3>6.4.1 GIáº¢I THUáº¬T NGÃ‚N HÃ€NG (BANKERâ€™S ALGORITHM)</h3><p>DÃ¹ng Ä‘á»ƒ trÃ¡nh táº¯c ngháº½n trong há»‡ thá»‘ng cÃ³ tÃ i nguyÃªn há»¯u háº¡n.</p><p><b>Giáº£ sá»­:</b> Má»—i tiáº¿n trÃ¬nh khai bÃ¡o trÆ°á»›c lÆ°á»£ng tÃ i nguyÃªn tá»‘i Ä‘a cáº§n dÃ¹ng. Há»‡ thá»‘ng chá»‰ cáº¥p phÃ¡t náº¿u sau khi cáº¥p váº«n á»Ÿ tráº¡ng thÃ¡i an toÃ n.</p><pre><code>Available = [3,3,2] Allocation = [[0,1,0],[2,0,0],[3,0,2],[2,1,1],[0,0,2]] Max = [[7,5,3],[3,2,2],[9,0,2],[2,2,2],[4,3,3]]</code></pre><p>Thuáº­t toÃ¡n kiá»ƒm tra ma tráº­n Need = Max - Allocation Ä‘á»ƒ xÃ¡c Ä‘á»‹nh tiáº¿n trÃ¬nh nÃ o cÃ³ thá»ƒ hoÃ n thÃ nh.</p><hr><h2>6.5 PHÃT HIá»†N Táº®C NGHáº¼N</h2><p>Ãp dá»¥ng khi há»‡ thá»‘ng cho phÃ©p xáº£y ra deadlock, nhÆ°ng cáº§n cÆ¡ cháº¿ phÃ¡t hiá»‡n vÃ  xá»­ lÃ½.</p><ul><li>XÃ¢y dá»±ng <b>Resource Allocation Graph (RAG)</b>.</li><li>Náº¿u Ä‘á»“ thá»‹ cÃ³ chu trÃ¬nh â†’ cÃ³ thá»ƒ cÃ³ deadlock.</li></ul><p>Trong há»‡ thá»‘ng cÃ³ nhiá»u tÃ i nguyÃªn cÃ¹ng loáº¡i, sá»­ dá»¥ng ma tráº­n Allocation, Request, Available Ä‘á»ƒ kiá»ƒm tra vÃ²ng láº·p chá» tÃ i nguyÃªn.</p><hr><h2>6.6 PHá»¤C Há»’I SAU DEADLOCK</h2><p>Khi phÃ¡t hiá»‡n deadlock, OS cÃ³ thá»ƒ:</p><ul><li><b>Káº¿t thÃºc tiáº¿n trÃ¬nh:</b> Cháº¥m dá»©t má»™t hoáº·c nhiá»u tiáº¿n trÃ¬nh Ä‘á»ƒ phÃ¡ chu trÃ¬nh.</li><li><b>Thu há»“i tÃ i nguyÃªn:</b> Táº¡m dá»«ng má»™t sá»‘ tiáº¿n trÃ¬nh, thu há»“i tÃ i nguyÃªn, rá»“i cho cháº¡y láº¡i.</li></ul><p>Cáº§n chá»n tiÃªu chÃ­ tiáº¿n trÃ¬nh bá»‹ dá»«ng: thá»i gian cháº¡y, má»©c Æ°u tiÃªn, sá»‘ tÃ i nguyÃªn giá»¯, sá»‘ tÃ i nguyÃªn cáº§n thÃªm...</p><hr><h2>6.7 MÃ” HÃŒNH PHÃ’NG TRÃNH DEADLOCK TRONG Há»† ÄA LUá»’NG</h2><p>Trong láº­p trÃ¬nh song song, cÃ³ thá»ƒ trÃ¡nh deadlock báº±ng:</p><ul><li>DÃ¹ng timeout cho lock.</li><li>YÃªu cáº§u tÃ i nguyÃªn theo thá»© tá»± toÃ n cá»¥c.</li><li>DÃ¹ng cÆ¡ cháº¿ <b>tryLock()</b> trong Java hoáº·c <b>std::try_lock()</b> trong C++ Ä‘á»ƒ trÃ¡nh chá» vÃ´ háº¡n.</li></ul><hr><h2>âœ… Tá»”NG Káº¾T</h2><ul><li>Deadlock lÃ  hiá»‡n tÆ°á»£ng tiáº¿n trÃ¬nh chá» nhau vÄ©nh viá»…n.</li><li>4 Ä‘iá»u kiá»‡n Coffman lÃ  ná»n táº£ng Ä‘á»ƒ phÃ¢n tÃ­ch deadlock.</li><li>CÃ³ 4 hÆ°á»›ng xá»­ lÃ½: PhÃ²ng ngá»«a â€“ TrÃ¡nh â€“ PhÃ¡t hiá»‡n â€“ Phá»¥c há»“i.</li><li>Giáº£i thuáº­t ngÃ¢n hÃ ng lÃ  phÆ°Æ¡ng phÃ¡p trÃ¡nh deadlock hiá»‡u quáº£ nháº¥t trong há»‡ thá»‘ng cÃ³ tÃ i nguyÃªn Ä‘á»‹nh trÆ°á»›c.</li></ul>