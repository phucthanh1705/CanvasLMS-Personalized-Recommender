{
  "id": "lesson_bai-03-spring-mvc",
  "title": "lesson_bai-03-spring-mvc",
  "body": "<h1>BÃ i 03 - SPRING MVC</h1><h2>ğŸ¯ Má»¥c tiÃªu há»c táº­p</h2><ul>  <li>Hiá»ƒu Ä‘Æ°á»£c mÃ´ hÃ¬nh kiáº¿n trÃºc MVC (Model â€“ View â€“ Controller) trong Spring.</li>  <li>Náº¯m Ä‘Æ°á»£c vai trÃ² cá»§a <b>DispatcherServlet</b> vÃ  cÃ¡ch xá»­ lÃ½ request trong Spring MVC.</li>  <li>Biáº¿t cÃ¡ch cáº¥u hÃ¬nh dá»± Ã¡n Spring MVC báº±ng XML vÃ  Annotation.</li>  <li>Táº¡o Ä‘Æ°á»£c Controller, View (JSP/Thymeleaf) vÃ  xá»­ lÃ½ dá»¯ liá»‡u tá»« form.</li>  <li>Hiá»ƒu Ä‘Æ°á»£c cÆ¡ cháº¿ truyá»n dá»¯ liá»‡u giá»¯a Controller vÃ  View qua <code>Model</code>.</li></ul><hr><h2>1. Giá»›i thiá»‡u mÃ´ hÃ¬nh MVC</h2><p>MÃ´ hÃ¬nh <b>MVC</b> chia á»©ng dá»¥ng thÃ nh 3 táº§ng riÃªng biá»‡t:</p><ul>  <li><b>Model</b>: Quáº£n lÃ½ dá»¯ liá»‡u, logic nghiá»‡p vá»¥.</li>  <li><b>View</b>: Giao diá»‡n ngÆ°á»i dÃ¹ng (HTML, JSP, Thymeleaf...).</li>  <li><b>Controller</b>: Tiáº¿p nháº­n yÃªu cáº§u (request) tá»« client vÃ  Ä‘iá»u hÆ°á»›ng tá»›i view hoáº·c xá»­ lÃ½ model.</li></ul><p>Æ¯u Ä‘iá»ƒm cá»§a mÃ´ hÃ¬nh MVC:</p><ul>  <li>TÃ¡ch biá»‡t logic vÃ  giao diá»‡n.</li>  <li>Dá»… má»Ÿ rá»™ng, báº£o trÃ¬, vÃ  kiá»ƒm thá»­.</li>  <li>Táº­n dá»¥ng nguyÃªn lÃ½ â€œSeparation of Concernsâ€.</li></ul><hr><h2>2. Kiáº¿n trÃºc Spring MVC</h2><p>Spring MVC tuÃ¢n theo mÃ´ hÃ¬nh Front Controller, trong Ä‘Ã³ <b>DispatcherServlet</b> Ä‘Ã³ng vai trÃ² trung tÃ¢m.</p><h3>Luá»“ng xá»­ lÃ½ yÃªu cáº§u (Request Flow):</h3><ol>  <li>Client gá»­i HTTP request tá»›i <code>DispatcherServlet</code>.</li>  <li><code>DispatcherServlet</code> chuyá»ƒn tiáº¿p request Ä‘áº¿n <code>Controller</code> phÃ¹ há»£p.</li>  <li><code>Controller</code> xá»­ lÃ½ logic, gá»i Ä‘áº¿n lá»›p <code>Service</code> hoáº·c <code>Repository</code>.</li>  <li>Controller tráº£ vá» tÃªn View vÃ  dá»¯ liá»‡u thÃ´ng qua Ä‘á»‘i tÆ°á»£ng <code>Model</code>.</li>  <li><code>DispatcherServlet</code> gá»i <code>ViewResolver</code> Ä‘á»ƒ hiá»ƒn thá»‹ View tÆ°Æ¡ng á»©ng.</li></ol><p><b>Minh há»a vÃ²ng Ä‘á»i Request trong Spring MVC:</b></p><img src=\"https://springframework.guru/wp-content/uploads/2015/11/spring-mvc-flow.png\" alt=\"Spring MVC Flow\" width=\"600\" loading=\"lazy\"><hr><h2>3. Cáº¥u trÃºc má»™t á»©ng dá»¥ng Spring MVC</h2><p>CÃ¡c thÆ° má»¥c chÃ­nh cá»§a má»™t project Spring MVC:</p><pre><code>src/ â”œâ”€ controller/ â”‚   â””â”€ HomeController.java â”œâ”€ model/ â”‚   â””â”€ Student.java â”œâ”€ view/ â”‚   â””â”€ home.jsp â”œâ”€ WEB-INF/ â”‚   â”œâ”€ web.xml â”‚   â””â”€ dispatcher-servlet.xml</code></pre><p>File <code>web.xml</code> dÃ¹ng Ä‘á»ƒ khai bÃ¡o <code>DispatcherServlet</code>:</p><pre><code>&lt;servlet&gt;  &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;  &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;  &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;&lt;/servlet&gt;&lt;servlet-mapping&gt;  &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;  &lt;url-pattern&gt;/&lt;/url-pattern&gt;&lt;/servlet-mapping&gt;</code></pre><hr><h2>4. Controller trong Spring MVC</h2><p>Controller lÃ  lá»›p chá»‹u trÃ¡ch nhiá»‡m tiáº¿p nháº­n vÃ  xá»­ lÃ½ yÃªu cáº§u HTTP.</p><p><b>VÃ­ dá»¥ Controller cÆ¡ báº£n:</b></p><pre><code>@Controllerpublic class HomeController {    @RequestMapping(\"/home\")    public String showHome(Model model) {        model.addAttribute(\"message\", \"ChÃ o má»«ng Ä‘áº¿n vá»›i Spring MVC!\");        return \"home\"; // Tráº£ vá» view home.jsp    }}</code></pre><p>Spring tá»± Ä‘á»™ng tÃ¬m view cÃ³ tÃªn <code>home</code> trong thÆ° má»¥c cáº¥u hÃ¬nh cá»§a ViewResolver (vÃ­ dá»¥: <code>/WEB-INF/views/home.jsp</code>).</p><hr><h2>5. Cáº¥u hÃ¬nh View Resolver</h2><p>ViewResolver giÃºp Spring xÃ¡c Ä‘á»‹nh view cáº§n render.</p><pre><code>&lt;bean class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\"&gt;  &lt;property name=\"prefix\" value=\"/WEB-INF/views/\"/&gt;  &lt;property name=\"suffix\" value=\".jsp\"/&gt;&lt;/bean&gt;</code></pre><p>Khi Controller tráº£ vá» \"home\", ViewResolver sáº½ tÃ¬m vÃ  hiá»ƒn thá»‹ file: <code>/WEB-INF/views/home.jsp</code></p><hr><h2>6. Truyá»n dá»¯ liá»‡u giá»¯a Controller vÃ  View</h2><p>DÃ¹ng Ä‘á»‘i tÆ°á»£ng <code>Model</code> hoáº·c <code>ModelAndView</code> Ä‘á»ƒ gá»­i dá»¯ liá»‡u tá»›i View.</p><pre><code>@RequestMapping(\"/student\")public String showStudent(Model model) {    Student s = new Student(\"Nguyen Van A\", 9.0);    model.addAttribute(\"student\", s);    return \"student-info\";}</code></pre><p><b>Trong JSP:</b></p><pre><code>&lt;p&gt;TÃªn sinh viÃªn: ${student.name}&lt;/p&gt;&lt;p&gt;Äiá»ƒm trung bÃ¬nh: ${student.score}&lt;/p&gt;</code></pre><hr><h2>7. Nháº­n dá»¯ liá»‡u tá»« Form (POST Request)</h2><p>Spring MVC há»— trá»£ nháº­n dá»¯ liá»‡u form qua <code>@RequestParam</code> hoáº·c <code>@ModelAttribute</code>.</p><pre><code>@Controllerpublic class FormController {    @RequestMapping(value=\"/register\", method=RequestMethod.POST)  public String submitForm(@RequestParam(\"username\") String name, Model model) {      model.addAttribute(\"msg\", \"Xin chÃ o \" + name);      return \"welcome\";  }}</code></pre><p><b>Form JSP:</b></p><pre><code>&lt;form action=\"register\" method=\"post\"&gt;  TÃªn: &lt;input type=\"text\" name=\"username\"/&gt;  &lt;input type=\"submit\" value=\"Gá»­i\"/&gt;&lt;/form&gt;</code></pre><hr><h2>8. Annotation há»¯u Ã­ch trong Spring MVC</h2><ul>  <li><code>@Controller</code> â€“ Ä‘Ã¡nh dáº¥u lá»›p lÃ  Controller.</li>  <li><code>@RequestMapping</code> â€“ Ã¡nh xáº¡ URL Ä‘áº¿n phÆ°Æ¡ng thá»©c xá»­ lÃ½.</li>  <li><code>@RequestParam</code> â€“ láº¥y giÃ¡ trá»‹ tá»« tham sá»‘ URL hoáº·c form.</li>  <li><code>@ModelAttribute</code> â€“ bind dá»¯ liá»‡u form vÃ o object.</li>  <li><code>@ResponseBody</code> â€“ tráº£ káº¿t quáº£ trá»±c tiáº¿p (dáº¡ng text/json).</li></ul><hr><h2>9. Upload File trong Spring MVC</h2><p>Spring há»— trá»£ upload file thÃ´ng qua <code>MultipartFile</code>.</p><pre><code>@PostMapping(\"/upload\")public String uploadFile(@RequestParam(\"file\") MultipartFile file, Model model) throws IOException {    String name = file.getOriginalFilename();    file.transferTo(new File(\"/uploads/\" + name));    model.addAttribute(\"msg\", \"ÄÃ£ upload: \" + name);    return \"upload_result\";}</code></pre><p><b>Cáº¥u hÃ¬nh multipart resolver:</b></p><pre><code>&lt;bean id=\"multipartResolver\" class=\"org.springframework.web.multipart.commons.CommonsMultipartResolver\"/&gt;</code></pre><hr><h2>10. Sá»­ dá»¥ng Static Resources (CSS, JS, Images)</h2><p>Cáº¥u hÃ¬nh Ä‘á»ƒ Spring cho phÃ©p truy cáº­p tÃ i nguyÃªn tÄ©nh:</p><pre><code>&lt;mvc:resources mapping=\"/resources/**\" location=\"/resources/\" /&gt;</code></pre><p>Sau Ä‘Ã³, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng: <code>&lt;link rel=\"stylesheet\" href=\"${pageContext.request.contextPath}/resources/css/style.css\"&gt;</code></p><hr><h2>ğŸ§  BÃ i táº­p gá»£i Ã½</h2><ol>  <li>Táº¡o á»©ng dá»¥ng Spring MVC hiá»ƒn thá»‹ trang â€œHello Springâ€.</li>  <li>Thá»±c hÃ nh truyá»n dá»¯ liá»‡u tá»« Controller Ä‘áº¿n View báº±ng <code>Model</code>.</li>  <li>Táº¡o form nháº­p thÃ´ng tin sinh viÃªn, hiá»ƒn thá»‹ káº¿t quáº£ trÃªn trang khÃ¡c.</li>  <li>Thá»­ upload file áº£nh vÃ  hiá»ƒn thá»‹ láº¡i sau khi táº£i lÃªn.</li>  <li>ThÃªm CSS, JS vÃ o View vÃ  cáº¥u hÃ¬nh tÃ i nguyÃªn tÄ©nh.</li></ol><hr><h2>âœ… Tá»•ng káº¿t</h2><p>Module nÃ y giÃºp sinh viÃªn náº¯m vá»¯ng mÃ´ hÃ¬nh <b>Spring MVC</b>, cÃ¡ch Ä‘á»‹nh tuyáº¿n request, táº¡o controller, vÃ  káº¿t ná»‘i dá»¯ liá»‡u giá»¯a táº§ng trÃ¬nh bÃ y vÃ  logic.</p><p>ÄÃ¢y lÃ  ná»n táº£ng Ä‘á»ƒ tiáº¿p tá»¥c vá»›i <strong>Module M04 â€“ JDBC vÃ  Spring JDBC</strong>, xá»­ lÃ½ dá»¯ liá»‡u thá»±c táº¿ trong á»©ng dá»¥ng.</p>",
  "updated_at": null
}