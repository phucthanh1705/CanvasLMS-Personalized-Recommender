<h1>üß© B√†i 05 ‚Äì HIBERNATE (ORM)</h1><h2>üéØ M·ª•c ti√™u h·ªçc t·∫≠p</h2><ul><li>Hi·ªÉu kh√°i ni·ªám ORM (Object-Relational Mapping) v√† vai tr√≤ c·ªßa Hibernate trong ·ª©ng d·ª•ng Java.</li><li>Thi·∫øt l·∫≠p m√¥i tr∆∞·ªùng l√†m vi·ªác v·ªõi Hibernate Framework.</li><li>Th·ª±c hi·ªán √°nh x·∫° l·ªõp Java sang b·∫£ng c∆° s·ªü d·ªØ li·ªáu (mapping).</li><li>Thao t√°c d·ªØ li·ªáu v·ªõi Hibernate: th√™m, s·ª≠a, x√≥a, truy v·∫•n (CRUD).</li><li>N·∫Øm ƒë∆∞·ª£c c√∫ ph√°p HQL (Hibernate Query Language) v√† c√°ch t√≠ch h·ª£p Hibernate v·ªõi Spring.</li></ul><hr><h2>1. Gi·ªõi thi·ªáu v·ªÅ ORM v√† Hibernate</h2><p><b>ORM (Object Relational Mapping)</b> l√† k·ªπ thu·∫≠t gi√∫p √°nh x·∫° gi·ªØa ƒë·ªëi t∆∞·ª£ng trong Java v√† b·∫£ng trong c∆° s·ªü d·ªØ li·ªáu. Thay v√¨ vi·∫øt tr·ª±c ti·∫øp c√¢u l·ªánh SQL, l·∫≠p tr√¨nh vi√™n thao t√°c tr√™n c√°c ƒë·ªëi t∆∞·ª£ng Java, Hibernate s·∫Ω t·ª± ƒë·ªông chuy·ªÉn ƒë·ªïi sang SQL t∆∞∆°ng ·ª©ng.</p><p><b>Hibernate</b> l√† framework ORM ph·ªï bi·∫øn nh·∫•t trong h·ªá sinh th√°i Java, h·ªó tr·ª£:</p><ul><li>T·ª± ƒë·ªông √°nh x·∫° (mapping) class ‚Üî table, field ‚Üî column.</li><li>Qu·∫£n l√Ω transaction v√† k·∫øt n·ªëi CSDL.</li><li>H·ªó tr·ª£ caching, lazy loading, v√† query b·∫±ng HQL.</li></ul><p><b>∆Øu ƒëi·ªÉm:</b></p><ul><li>Gi·∫£m m√£ SQL th·ªß c√¥ng.</li><li>T·ª± ƒë·ªông ƒë·ªìng b·ªô c·∫•u tr√∫c d·ªØ li·ªáu.</li><li>D·ªÖ chuy·ªÉn ƒë·ªïi gi·ªØa c√°c lo·∫°i CSDL kh√°c nhau.</li></ul><hr><h2>2. C·∫•u tr√∫c d·ª± √°n Hibernate</h2><pre><code>src/ ‚îú‚îÄ entity/ ‚îÇ   ‚îî‚îÄ Student.java ‚îú‚îÄ util/ ‚îÇ   ‚îî‚îÄ HibernateUtil.java ‚îú‚îÄ main/ ‚îÇ   ‚îî‚îÄ TestHibernate.java ‚îú‚îÄ resources/ ‚îÇ   ‚îî‚îÄ hibernate.cfg.xml</code></pre><p>File <code>hibernate.cfg.xml</code> d√πng ƒë·ªÉ c·∫•u h√¨nh k·∫øt n·ªëi CSDL v√† c√°c entity ƒë∆∞·ª£c qu·∫£n l√Ω:</p><pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"&gt;&lt;hibernate-configuration&gt;  &lt;session-factory&gt;    &lt;property name="hibernate.connection.driver_class"&gt;com.mysql.cj.jdbc.Driver&lt;/property&gt;    &lt;property name="hibernate.connection.url"&gt;jdbc:mysql://localhost:3306/student_db&lt;/property&gt;    &lt;property name="hibernate.connection.username"&gt;root&lt;/property&gt;    &lt;property name="hibernate.connection.password"&gt;123456&lt;/property&gt;    &lt;property name="hibernate.dialect"&gt;org.hibernate.dialect.MySQLDialect&lt;/property&gt;    &lt;property name="show_sql"&gt;true&lt;/property&gt;    &lt;property name="hbm2ddl.auto"&gt;update&lt;/property&gt;    &lt;mapping class="entity.Student"/&gt;  &lt;/session-factory&gt;&lt;/hibernate-configuration&gt;</code></pre><hr><h2>3. √Ånh x·∫° l·ªõp (Entity Mapping)</h2><pre><code>@Entity@Table(name = "student")public class Student {    @Id    @GeneratedValue(strategy = GenerationType.IDENTITY)    private int id;    @Column(name = "name", length = 100)    private String name;    @Column(name = "score")    private double score;    public Student() {}    public Student(String name, double score) {        this.name = name;        this.score = score;    }    // Getter, Setter, toString()}</code></pre><ul><li><code>@Entity</code> ‚Äì khai b√°o l·ªõp l√† th·ª±c th·ªÉ.</li><li><code>@Table</code> ‚Äì √°nh x·∫° l·ªõp v·ªõi t√™n b·∫£ng.</li><li><code>@Id</code> ‚Äì x√°c ƒë·ªãnh kh√≥a ch√≠nh.</li><li><code>@GeneratedValue</code> ‚Äì sinh t·ª± ƒë·ªông ID.</li><li><code>@Column</code> ‚Äì √°nh x·∫° thu·ªôc t√≠nh v·ªõi c·ªôt.</li></ul><hr><h2>4. HibernateUtil ‚Äì Qu·∫£n l√Ω SessionFactory</h2><pre><code>public class HibernateUtil {    private static final SessionFactory sessionFactory;    static {        try {            sessionFactory = new Configuration().configure().buildSessionFactory();        } catch (Throwable ex) {            throw new ExceptionInInitializerError(ex);        }    }    public static SessionFactory getSessionFactory() {        return sessionFactory;    }}</code></pre><hr><h2>5. C√°c thao t√°c CRUD v·ªõi Hibernate</h2><pre><code>// CreateSession session = HibernateUtil.getSessionFactory().openSession();session.beginTransaction();Student s1 = new Student("Nguyen Van A", 8.5);session.save(s1);session.getTransaction().commit();session.close();// ReadSession session = HibernateUtil.getSessionFactory().openSession();List&lt;Student&gt; list = session.createQuery("from Student", Student.class).list();list.forEach(System.out::println);session.close();// UpdateSession session = HibernateUtil.getSessionFactory().openSession();session.beginTransaction();Student s = session.get(Student.class, 1);s.setScore(9.2);session.update(s);session.getTransaction().commit();session.close();// DeleteSession session = HibernateUtil.getSessionFactory().openSession();session.beginTransaction();Student s = session.get(Student.class, 1);session.delete(s);session.getTransaction().commit();session.close();</code></pre><hr><h2>6. Truy v·∫•n HQL (Hibernate Query Language)</h2><pre><code>String hql = "FROM Student WHERE score &gt; :minScore";Query&lt;Student&gt; query = session.createQuery(hql, Student.class);query.setParameter("minScore", 8.0);List&lt;Student&gt; results = query.list();</code></pre><hr><h2>7. T√≠ch h·ª£p Hibernate v·ªõi Spring Framework</h2><pre><code>&lt;bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource"&gt;  &lt;property name="driverClassName" value="com.mysql.cj.jdbc.Driver"/&gt;  &lt;property name="url" value="jdbc:mysql://localhost:3306/student_db"/&gt;  &lt;property name="username" value="root"/&gt;  &lt;property name="password" value="123456"/&gt;&lt;/bean&gt;&lt;bean id="sessionFactory" class="org.springframework.orm.hibernate5.LocalSessionFactoryBean"&gt;  &lt;property name="dataSource" ref="dataSource"/&gt;  &lt;property name="packagesToScan" value="entity"/&gt;  &lt;property name="hibernateProperties"&gt;    &lt;props&gt;      &lt;prop key="hibernate.dialect"&gt;org.hibernate.dialect.MySQLDialect&lt;/prop&gt;      &lt;prop key="hibernate.show_sql"&gt;true&lt;/prop&gt;    &lt;/props&gt;  &lt;/property&gt;&lt;/bean&gt;</code></pre><hr><h2>üß† B√†i t·∫≠p g·ª£i √Ω</h2><ol><li>C√†i ƒë·∫∑t Hibernate v√† k·∫øt n·ªëi v·ªõi c∆° s·ªü d·ªØ li·ªáu MySQL.</li><li>T·∫°o l·ªõp Student √°nh x·∫° sang b·∫£ng student.</li><li>Th·ª±c hi·ªán CRUD c∆° b·∫£n b·∫±ng Hibernate.</li><li>Vi·∫øt truy v·∫•n HQL hi·ªÉn th·ªã danh s√°ch sinh vi√™n c√≥ ƒëi·ªÉm &gt; 8.</li><li>T√≠ch h·ª£p Hibernate v·ªõi Spring b·∫±ng LocalSessionFactoryBean.</li></ol><hr><h2>‚úÖ T·ªïng k·∫øt</h2><p>Module n√†y gi√∫p sinh vi√™n n·∫Øm ch·∫Øc c√°ch √°nh x·∫° ƒë·ªëi t∆∞·ª£ng Java v·ªõi b·∫£ng d·ªØ li·ªáu v√† th·ª±c hi·ªán thao t√°c d·ªØ li·ªáu b·∫±ng <b>Hibernate ORM</b>. K·ªπ nƒÉng n√†y l√† n·ªÅn t·∫£ng ƒë·ªÉ b∆∞·ªõc sang <b>Module M06 ‚Äì ·ª®ng d·ª•ng t·ªïng h·ª£p Spring MVC + Hibernate</b>, n∆°i b·∫°n s·∫Ω x√¢y d·ª±ng ·ª©ng d·ª•ng web ho√†n ch·ªânh.</p>