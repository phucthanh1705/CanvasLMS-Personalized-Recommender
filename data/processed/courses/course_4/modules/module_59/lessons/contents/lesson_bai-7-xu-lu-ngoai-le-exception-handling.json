{
  "id": "lesson_bai-7-xu-lu-ngoai-le-exception-handling",
  "title": "lesson_bai-7-xu-lu-ngoai-le-exception-handling",
  "body": "<h1>BÀI 7 – XỬ LÝ NGOẠI LỆ (EXCEPTION HANDLING)</h1><h2>Mục tiêu học tập</h2><ul><li>Hiểu cơ chế xử lý ngoại lệ trong Java và tầm quan trọng của việc kiểm soát lỗi.</li><li>Phân biệt ngoại lệ kiểm tra (checked) và không kiểm tra (unchecked).</li><li>Thực hành sử dụng try–catch–finally, throw, throws và tạo ngoại lệ tùy chỉnh (custom exception).</li><li>Áp dụng xử lý ngoại lệ trong thiết kế chương trình an toàn, dễ bảo trì.</li></ul><hr><h2>1. Khái niệm về ngoại lệ</h2><p><b>Exception</b> là một sự kiện xảy ra trong quá trình thực thi làm gián đoạn luồng chương trình bình thường. Mỗi lỗi trong Java được đại diện bởi một đối tượng ngoại lệ (exception object).</p><p>Java chia ngoại lệ thành 3 nhóm:</p><ul><li><b>Checked Exception:</b> bắt buộc phải xử lý (IOException, SQLException).</li><li><b>Unchecked Exception:</b> không bắt buộc (NullPointerException, ArithmeticException).</li><li><b>Error:</b> lỗi nghiêm trọng của hệ thống (OutOfMemoryError).</li></ul><hr><h2>2. Cấu trúc try–catch–finally</h2><pre><code>try { int x = 10 / 0; } catch (ArithmeticException e) { System.out.println(\"Lỗi chia cho 0: \" + e.getMessage()); } finally { System.out.println(\"Khối finally luôn được thực thi.\"); }</code></pre><p>Khối <code>finally</code> luôn được thực thi dù có ngoại lệ hay không, thường dùng để đóng tài nguyên (file, kết nối DB,...).</p><hr><h2>3. Câu lệnh throw và throws</h2><ul><li><b>throw:</b> dùng để ném ngoại lệ trong thân phương thức.</li><li><b>throws:</b> khai báo ngoại lệ mà phương thức có thể ném ra.</li></ul><pre><code>void checkAge(int age) throws Exception { if(age &lt; 18) throw new Exception(\"Chưa đủ tuổi\"); }</code></pre><hr><h2>4. Tạo ngoại lệ tùy chỉnh (Custom Exception)</h2><p>Lập trình viên có thể tự định nghĩa ngoại lệ mới kế thừa từ lớp Exception hoặc RuntimeException.</p><pre><code>class InvalidScoreException extends Exception { InvalidScoreException(String msg){ super(msg); } }</code></pre><pre><code>if(score &lt; 0 || score &gt; 10) throw new InvalidScoreException(\"Điểm không hợp lệ\");</code></pre><hr><h2>5. Xử lý nhiều ngoại lệ</h2><p>Từ Java 7 có thể bắt nhiều loại ngoại lệ trong cùng một khối catch.</p><pre><code>try { int[] a = new int[3]; a[4] = 10; } catch (ArrayIndexOutOfBoundsException | NullPointerException e) { System.out.println(\"Lỗi: \" + e); }</code></pre><hr><h2>6. Thứ tự xử lý ngoại lệ</h2><p>Java xử lý ngoại lệ theo thứ tự từ trên xuống. Nên đặt các ngoại lệ cụ thể trước ngoại lệ tổng quát (Exception).</p><pre><code>try { ... } catch (IOException e) { ... } catch (Exception e) { ... }</code></pre><hr><h2>7. Tạo chuỗi ngoại lệ (Exception Chaining)</h2><p>Cho phép một ngoại lệ được bao bọc bởi ngoại lệ khác để giữ lại nguyên nhân gốc.</p><pre><code>try { throw new IOException(\"Lỗi file\"); } catch (IOException e) { throw new RuntimeException(\"Không thể đọc dữ liệu\", e); }</code></pre><hr><h2>8. Thực hành quản lý tài nguyên – try-with-resources</h2><p>Java cung cấp cú pháp <b>try-with-resources</b> để tự động đóng tài nguyên.</p><pre><code>try (FileReader fr = new FileReader(\"data.txt\")) { int c; while((c = fr.read()) != -1) System.out.print((char)c); } catch (IOException e) { e.printStackTrace(); }</code></pre><hr><h2>9. Nguyên tắc thiết kế xử lý ngoại lệ tốt</h2><ul><li>Chỉ bắt ngoại lệ mà bạn có thể xử lý hợp lý.</li><li>Không che giấu lỗi bằng catch rỗng.</li><li>Dùng custom exception cho ngữ nghĩa rõ ràng.</li><li>Luôn đóng tài nguyên sau khi dùng (finally hoặc try-with-resources).</li></ul><hr><h2>Kết luận</h2><p>Exception Handling là công cụ quan trọng trong Java giúp quản lý lỗi một cách an toàn, tránh crash chương trình và đảm bảo hệ thống hoạt động ổn định. Việc thiết kế ngoại lệ rõ ràng giúp phần mềm dễ bảo trì, dễ mở rộng và ít lỗi hơn.</p>",
  "updated_at": null
}