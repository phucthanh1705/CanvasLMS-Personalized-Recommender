<h1>üß© B√ÄI 08 ‚Äì H√ÄM V√Ä BI·ªÇU TH·ª®C TRONG SQL</h1><h2>üéØ M·ª•c ti√™u h·ªçc t·∫≠p</h2><ul><li>Hi·ªÉu r√µ c√°c lo·∫°i h√†m trong SQL: h√†m t·ªïng h·ª£p, h√†m chu·ªói, h√†m ng√†y th√°ng, h√†m chuy·ªÉn ƒë·ªïi v√† h√†m h·ªá th·ªëng.</li><li>Bi·∫øt c√°ch k·∫øt h·ª£p bi·ªÉu th·ª©c logic, to√°n h·ªçc v√† h√†m trong c√¢u truy v·∫•n ƒë·ªÉ x·ª≠ l√Ω d·ªØ li·ªáu ph·ª©c t·∫°p.</li><li>√Åp d·ª•ng h√†m ng∆∞·ªùi d√πng ƒë·ªãnh nghƒ©a (UDF) trong ph√¢n t√≠ch d·ªØ li·ªáu.</li><li>Ph√¢n bi·ªát v√† t·ªëi ∆∞u hi·ªáu nƒÉng khi s·ª≠ d·ª•ng c√°c lo·∫°i h√†m trong SQL.</li></ul><hr><h2>1. PH√ÇN LO·∫†I H√ÄM TRONG SQL</h2><p>SQL cung c·∫•p nhi·ªÅu lo·∫°i h√†m gi√∫p x·ª≠ l√Ω d·ªØ li·ªáu hi·ªáu qu·∫£. G·ªìm:</p><ul><li><b>H√†m t·ªïng h·ª£p (Aggregate):</b> SUM(), COUNT(), AVG(), MAX(), MIN().</li><li><b>H√†m chu·ªói (String):</b> CONCAT(), SUBSTRING(), LEN(), LOWER(), UPPER(), REPLACE().</li><li><b>H√†m ng√†y th√°ng (Date/Time):</b> GETDATE(), YEAR(), MONTH(), DATEDIFF(), DATEADD().</li><li><b>H√†m chuy·ªÉn ƒë·ªïi (Conversion):</b> CAST(), CONVERT().</li><li><b>H√†m h·ªá th·ªëng:</b> @@IDENTITY, SYSTEM_USER, CURRENT_TIMESTAMP.</li></ul><hr><h2>2. H√ÄM T·ªîNG H·ª¢P (AGGREGATE FUNCTIONS)</h2><p>D√πng ƒë·ªÉ t√≠nh to√°n t·ªïng h·ª£p d·ªØ li·ªáu theo nh√≥m ho·∫∑c to√†n b·ªô b·∫£ng.</p><pre><code>SELECT MaLop, COUNT(*) AS SoSV, AVG(Diem) AS DiemTB<br>FROM SinhVien JOIN DangKy ON SinhVien.MaSV = DangKy.MaSV<br>GROUP BY MaLop;</code></pre><p><b>L∆∞u √Ω:</b> C√°c h√†m t·ªïng h·ª£p ch·ªâ d√πng trong SELECT ho·∫∑c HAVING, kh√¥ng th·ªÉ d√πng trong WHERE.</p><hr><h2>3. H√ÄM X·ª¨ L√ù CHU·ªñI (STRING FUNCTIONS)</h2><ul><li><b>CONCAT:</b> N·ªëi chu·ªói.<pre><code>SELECT CONCAT(HoTen, ' - ', MaSV) FROM SinhVien;</code></pre></li><li><b>SUBSTRING:</b> Tr√≠ch chu·ªói con.<pre><code>SELECT SUBSTRING(HoTen, 1, 5) FROM SinhVien;</code></pre></li><li><b>REPLACE:</b> Thay th·∫ø k√Ω t·ª±.<pre><code>SELECT REPLACE(HoTen, 'Nguyen', 'Tr·∫ßn') FROM SinhVien;</code></pre></li><li><b>UPPER/LOWER:</b> Chuy·ªÉn ƒë·ªïi hoa th∆∞·ªùng.<pre><code>SELECT UPPER(HoTen), LOWER(HoTen) FROM SinhVien;</code></pre></li></ul><hr><h2>4. H√ÄM NG√ÄY TH√ÅNG (DATE FUNCTIONS)</h2><ul><li><b>GETDATE():</b> L·∫•y ng√†y hi·ªán t·∫°i.</li><li><b>DATEDIFF:</b> T√≠nh kho·∫£ng c√°ch gi·ªØa hai ng√†y.<pre><code>SELECT DATEDIFF(YEAR, NgaySinh, GETDATE()) AS Tuoi FROM SinhVien;</code></pre></li><li><b>DATEADD:</b> C·ªông th√™m ng√†y, th√°ng, nƒÉm.<pre><code>SELECT DATEADD(DAY, 30, NgayDangKy) FROM DangKy;</code></pre></li></ul><hr><h2>5. H√ÄM CHUY·ªÇN ƒê·ªîI (CONVERSION)</h2><pre><code>SELECT CAST(Diem AS DECIMAL(5,2)) FROM DangKy;<br>SELECT CONVERT(VARCHAR, GETDATE(), 103);</code></pre><p><b>Kh√°c bi·ªát:</b> CAST tu√¢n theo chu·∫©n ANSI, CONVERT m·ªü r·ªông cho t·ª´ng h·ªá qu·∫£n tr·ªã.</p><hr><h2>6. H√ÄM NG∆Ø·ªúI D√ôNG ƒê·ªäNH NGHƒ®A (UDF)</h2><p>Ng∆∞·ªùi d√πng c√≥ th·ªÉ t·ª± ƒë·ªãnh nghƒ©a h√†m x·ª≠ l√Ω ri√™ng:</p><pre><code>CREATE FUNCTION fn_TinhDiemTB(@MaSV CHAR(10))<br>RETURNS FLOAT<br>AS BEGIN<br>DECLARE @tb FLOAT;<br>SELECT @tb = AVG(Diem) FROM DangKy WHERE MaSV=@MaSV;<br>RETURN @tb;<br>END;</code></pre><hr><h2>7. BI·ªÇU TH·ª®C TRONG SQL</h2><ul><li><b>Bi·ªÉu th·ª©c to√°n h·ªçc:</b> SELECT Diem * 0.4 + DiemKT * 0.6 AS DiemTong;</li><li><b>Bi·ªÉu th·ª©c logic:</b> SELECT CASE WHEN Diem &gt;= 8 THEN 'Gi·ªèi' WHEN Diem &gt;= 6.5 THEN 'Kh√°' ELSE 'Trung b√¨nh' END;</li><li><b>Bi·ªÉu th·ª©c ƒëi·ªÅu ki·ªán:</b> ISNULL(), COALESCE(), CASE.</li></ul><hr><h2>‚úÖ T·ªîNG K·∫æT</h2><ul><li>H√†m gi√∫p x·ª≠ l√Ω, t√≠nh to√°n v√† ƒë·ªãnh d·∫°ng d·ªØ li·ªáu trong SQL m·ªôt c√°ch linh ho·∫°t.</li><li>H√†m t·ªïng h·ª£p v√† h√†m chu·ªói l√† hai nh√≥m ƒë∆∞·ª£c d√πng ph·ªï bi·∫øn nh·∫•t trong b√°o c√°o.</li><li>H√†m ng∆∞·ªùi d√πng (UDF) gi√∫p t√πy bi·∫øn x·ª≠ l√Ω nghi·ªáp v·ª• ƒë·∫∑c th√π.</li><li>Hi·ªÉu r√µ h√†m v√† bi·ªÉu th·ª©c gi√∫p t·ªëi ∆∞u hi·ªáu nƒÉng v√† tr√°nh sai logic khi truy v·∫•n ph·ª©c t·∫°p.</li></ul>