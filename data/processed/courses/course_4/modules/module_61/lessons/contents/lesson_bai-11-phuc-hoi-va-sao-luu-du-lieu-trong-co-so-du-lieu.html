<h1>üß© B√ÄI 11 ‚Äì PH·ª§C H·ªíI V√Ä SAO L∆ØU D·ªÆ LI·ªÜU TRONG C∆† S·ªû D·ªÆ LI·ªÜU</h1><h2>üéØ M·ª•c ti√™u h·ªçc t·∫≠p</h2><ul><li>Hi·ªÉu kh√°i ni·ªám ph·ª•c h·ªìi (recovery) v√† sao l∆∞u (backup) trong h·ªá qu·∫£n tr·ªã CSDL.</li><li>Ph√¢n bi·ªát c√°c lo·∫°i sao l∆∞u: to√†n b·ªô, vi sai, tƒÉng d·∫ßn, nh·∫≠t k√Ω (log-based backup).</li><li>N·∫Øm ƒë∆∞·ª£c c∆° ch·∫ø ghi log v√† ph·ª•c h·ªìi t·ª± ƒë·ªông c·ªßa DBMS.</li><li>Th·ª±c h√†nh thi·∫øt k·∫ø chi·∫øn l∆∞·ª£c sao l∆∞u v√† kh√¥i ph·ª•c trong t√¨nh hu·ªëng m·∫•t d·ªØ li·ªáu ho·∫∑c h·ªèng h·ªá th·ªëng.</li></ul><hr><h2>1. KH√ÅI NI·ªÜM SAO L∆ØU V√Ä PH·ª§C H·ªíI</h2><p><b>Sao l∆∞u (Backup):</b> L√† qu√° tr√¨nh l∆∞u tr·ªØ m·ªôt b·∫£n sao d·ªØ li·ªáu ra v·ªã tr√≠ an to√†n nh·∫±m ph·ª•c h·ªìi khi c√≥ s·ª± c·ªë.</p><p><b>Ph·ª•c h·ªìi (Recovery):</b> L√† qu√° tr√¨nh kh√¥i ph·ª•c d·ªØ li·ªáu v·ªÅ tr·∫°ng th√°i nh·∫•t qu√°n tr∆∞·ªõc khi x·∫£y ra l·ªói. H·ªá th·ªëng ph·ª•c h·ªìi d·ª±a v√†o log v√† c√°c b·∫£n sao l∆∞u tr∆∞·ªõc ƒë√≥.</p><hr><h2>2. C√ÅC LO·∫†I SAO L∆ØU</h2><h3>2.1 Sao l∆∞u to√†n b·ªô (Full Backup)</h3><p>Sao ch√©p to√†n b·ªô c∆° s·ªü d·ªØ li·ªáu t·∫°i m·ªôt th·ªùi ƒëi·ªÉm. D·ªÖ ph·ª•c h·ªìi nh∆∞ng t·ªën dung l∆∞·ª£ng v√† th·ªùi gian.</p><h3>2.2 Sao l∆∞u vi sai (Differential Backup)</h3><p>L∆∞u l·∫°i c√°c thay ƒë·ªïi k·ªÉ t·ª´ b·∫£n full g·∫ßn nh·∫•t. Ph·ª•c h·ªìi nhanh h∆°n incremental.</p><h3>2.3 Sao l∆∞u tƒÉng d·∫ßn (Incremental Backup)</h3><p>Ch·ªâ l∆∞u c√°c thay ƒë·ªïi k·ªÉ t·ª´ b·∫£n sao l∆∞u g·∫ßn nh·∫•t (full ho·∫∑c incremental). Ti·∫øt ki·ªám dung l∆∞·ª£ng nh∆∞ng ph·ª•c h·ªìi ch·∫≠m h∆°n.</p><h3>2.4 Sao l∆∞u theo log (Log-based Backup)</h3><p>L∆∞u c√°c giao d·ªãch ph√°t sinh theo th·ªùi gian th·ª±c (transaction logs), d√πng ƒë·ªÉ ph·ª•c h·ªìi ƒë·∫øn th·ªùi ƒëi·ªÉm b·∫•t k·ª≥.</p><hr><h2>3. LOG V√Ä KI·ªÇM SO√ÅT PH·ª§C H·ªíI</h2><p>H·ªá th·ªëng qu·∫£n tr·ªã c∆° s·ªü d·ªØ li·ªáu s·ª≠ d·ª•ng file log ƒë·ªÉ ghi l·∫°i m·ªçi thao t√°c:</p><ul><li><b>Redo log:</b> L∆∞u c√°c thay ƒë·ªïi ƒë√£ ƒë∆∞·ª£c commit ‚Äì d√πng khi c·∫ßn kh√¥i ph·ª•c d·ªØ li·ªáu m·∫•t do s·ª± c·ªë ph·∫ßn c·ª©ng.</li><li><b>Undo log:</b> Ghi c√°c thao t√°c ch∆∞a ho√†n t·∫•t ‚Äì d√πng ƒë·ªÉ rollback khi giao d·ªãch l·ªói.</li><li><b>Checkpoint:</b> D·∫•u m·ªëc th·ªùi gian l∆∞u tr·∫°ng th√°i ·ªïn ƒë·ªãnh ƒë·ªÉ ph·ª•c h·ªìi nhanh h∆°n.</li></ul><pre><code>BEGIN TRANSACTION;<br>UPDATE SanPham SET SoLuong = SoLuong - 1 WHERE MaSP = 'SP01';<br>COMMIT;<br>-- DBMS ghi log: Redo (SoLuong-1), Undo (SoLuong+1)</code></pre><hr><h2>4. CHI·∫æN L∆Ø·ª¢C SAO L∆ØU</h2><ul><li><b>Full + Incremental:</b> Ph·ªï bi·∫øn trong h·ªá th·ªëng l·ªõn, c√¢n b·∫±ng gi·ªØa t·ªëc ƒë·ªô v√† dung l∆∞·ª£ng.</li><li><b>Full + Differential:</b> D·ªÖ ph·ª•c h·ªìi h∆°n nh∆∞ng chi·∫øm nhi·ªÅu dung l∆∞·ª£ng h∆°n incremental.</li><li><b>Online Backup:</b> Th·ª±c hi·ªán khi h·ªá th·ªëng ƒëang ho·∫°t ƒë·ªông, c·∫ßn h·ªó tr·ª£ t·ª´ DBMS (v√≠ d·ª•: SQL Server, Oracle).</li><li><b>Offline Backup:</b> Ph·∫£i ng·∫Øt k·∫øt n·ªëi ng∆∞·ªùi d√πng trong th·ªùi gian sao l∆∞u.</li></ul><hr><h2>5. PH·ª§C H·ªíI SAU S·ª∞ C·ªê</h2><ul><li><b>Ph·ª•c h·ªìi t·ª©c th·ªùi:</b> Khi m·∫•t ƒëi·ªán ho·∫∑c crash ‚Äì DBMS t·ª± ƒë·ªông rollback giao d·ªãch ch∆∞a ho√†n t·∫•t.</li><li><b>Ph·ª•c h·ªìi c√≥ log:</b> D√πng file log ƒë·ªÉ redo v√† undo.</li><li><b>Ph·ª•c h·ªìi theo th·ªùi gian (Point-in-Time Recovery):</b> Kh√¥i ph·ª•c ƒë·∫øn th·ªùi ƒëi·ªÉm c·ª• th·ªÉ tr∆∞·ªõc khi l·ªói x·∫£y ra.</li></ul><pre><code>RESTORE DATABASE QuanLySinhVien<br>FROM DISK = 'D:\Backup\QLSV_FULL.bak'<br>WITH NORECOVERY;<br>RESTORE LOG QuanLySinhVien<br>FROM DISK = 'D:\Backup\QLSV_LOG.trn'<br>WITH STOPAT = '2025-10-10 10:30:00';</code></pre><hr><h2>6. TH·ª∞C H√ÄNH L·∫¨P K·∫æ HO·∫†CH SAO L∆ØU</h2><p>V√≠ d·ª•: ƒê·ªëi v·ªõi h·ªá th·ªëng tr∆∞·ªùng ƒë·∫°i h·ªçc:</p><ul><li>Full backup m·ªói tu·∫ßn (Ch·ªß nh·∫≠t 00:00).</li><li>Incremental backup m·ªói 6 gi·ªù.</li><li>Log backup m·ªói 30 ph√∫t.</li><li>L∆∞u tr·ªØ backup t·∫°i 2 v·ªã tr√≠: on-premise v√† cloud (Google Drive, AWS S3,...).</li></ul><hr><h2>‚úÖ T·ªîNG K·∫æT</h2><ul><li>Sao l∆∞u ƒë·ªãnh k·ª≥ gi√∫p b·∫£o v·ªá d·ªØ li·ªáu kh·ªèi s·ª± c·ªë, virus ho·∫∑c l·ªói ng∆∞·ªùi d√πng.</li><li>File log l√† n·ªÅn t·∫£ng c·ªßa ph·ª•c h·ªìi ch√≠nh x√°c trong DBMS.</li><li>Thi·∫øt l·∫≠p k·∫ø ho·∫°ch backup h·ª£p l√Ω gi√∫p ƒë·∫£m b·∫£o h·ªá th·ªëng lu√¥n s·∫µn s√†ng v√† ·ªïn ƒë·ªãnh.</li></ul>