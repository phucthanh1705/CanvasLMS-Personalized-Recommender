<h1>üß© B√ÄI 10 ‚Äì PH·ª§C H·ªíI &amp; SAO L∆ØU D·ªÆ LI·ªÜU (BACKUP &amp; RECOVERY)</h1><h2>üéØ M·ª•c ti√™u h·ªçc t·∫≠p</h2><ul><li>Hi·ªÉu t·∫ßm quan tr·ªçng c·ªßa sao l∆∞u v√† ph·ª•c h·ªìi d·ªØ li·ªáu trong h·ªá qu·∫£n tr·ªã c∆° s·ªü d·ªØ li·ªáu.</li><li>Ph√¢n bi·ªát ƒë∆∞·ª£c c√°c lo·∫°i sao l∆∞u (full, differential, incremental).</li><li>N·∫Øm r√µ c∆° ch·∫ø ph·ª•c h·ªìi d·ªØ li·ªáu t·ª´ transaction log v√† checkpoint.</li><li>Th·ª±c h√†nh c√°c l·ªánh SQL sao l∆∞u, ph·ª•c h·ªìi v√† ph·ª•c h·ªìi theo th·ªùi ƒëi·ªÉm (point-in-time recovery).</li></ul><hr><h2>1. KH√ÅI NI·ªÜM BACKUP &amp; RECOVERY</h2><p><b>Backup</b> l√† qu√° tr√¨nh sao l∆∞u d·ªØ li·ªáu t·ª´ CSDL sang n∆°i l∆∞u tr·ªØ d·ª± ph√≤ng nh·∫±m tr√°nh m·∫•t m√°t do l·ªói h·ªá th·ªëng, ph·∫ßn c·ª©ng ho·∫∑c con ng∆∞·ªùi.</p><p><b>Recovery</b> l√† qu√° tr√¨nh kh√¥i ph·ª•c CSDL v·ªÅ tr·∫°ng th√°i nh·∫•t qu√°n sau s·ª± c·ªë, d·ª±a tr√™n b·∫£n sao l∆∞u v√† nh·∫≠t k√Ω giao d·ªãch.</p><p>M·ª•c ti√™u: ƒë·∫£m b·∫£o d·ªØ li·ªáu c√≥ th·ªÉ kh√¥i ph·ª•c nhanh, ch√≠nh x√°c v√† an to√†n sau khi x·∫£y ra l·ªói.</p><hr><h2>2. C√ÅC LO·∫†I SAO L∆ØU</h2><h3>2.1 Sao l∆∞u to√†n b·ªô (Full Backup)</h3><p>Sao l∆∞u to√†n b·ªô d·ªØ li·ªáu trong CSDL. L√† n·ªÅn t·∫£ng cho c√°c lo·∫°i backup kh√°c.</p><pre><code>BACKUP DATABASE QLSV TO DISK='D:\backup\qlsv_full.bak';</code></pre><h3>2.2 Sao l∆∞u vi sai (Differential Backup)</h3><p>L∆∞u l·∫°i c√°c thay ƒë·ªïi k·ªÉ t·ª´ l·∫ßn backup to√†n b·ªô g·∫ßn nh·∫•t.</p><pre><code>BACKUP DATABASE QLSV TO DISK='D:\backup\qlsv_diff.bak' WITH DIFFERENTIAL;</code></pre><h3>2.3 Sao l∆∞u tƒÉng d·∫ßn (Incremental Backup)</h3><p>Ch·ªâ l∆∞u c√°c thay ƒë·ªïi k·ªÉ t·ª´ l·∫ßn backup g·∫ßn nh·∫•t (d√π l√† full hay incremental). T·ªëi ∆∞u dung l∆∞·ª£ng l∆∞u tr·ªØ nh∆∞ng ph·ª•c h·ªìi ph·ª©c t·∫°p h∆°n.</p><hr><h2>3. PH·ª§C H·ªíI D·ªÆ LI·ªÜU (RECOVERY)</h2><h3>3.1 Ph·ª•c h·ªìi to√†n b·ªô</h3><pre><code>RESTORE DATABASE QLSV FROM DISK='D:\backup\qlsv_full.bak' WITH REPLACE;</code></pre><h3>3.2 Ph·ª•c h·ªìi vi sai</h3><p>Ph·∫£i c√≥ b·∫£n full backup tr∆∞·ªõc ƒë√≥.</p><pre><code>RESTORE DATABASE QLSV FROM DISK='D:\backup\qlsv_full.bak' WITH NORECOVERY;<br>RESTORE DATABASE QLSV FROM DISK='D:\backup\qlsv_diff.bak' WITH RECOVERY;</code></pre><h3>3.3 Ph·ª•c h·ªìi theo th·ªùi ƒëi·ªÉm (Point-in-Time Recovery)</h3><p>Kh√¥i ph·ª•c ƒë·∫øn tr·∫°ng th√°i t·∫°i th·ªùi ƒëi·ªÉm tr∆∞·ªõc khi x·∫£y ra l·ªói.</p><pre><code>RESTORE LOG QLSV FROM DISK='D:\backup\qlsv_log.trn' WITH STOPAT='2025-10-20T10:15:00';</code></pre><hr><h2>4. C∆† CH·∫æ PH·ª§C H·ªíI TRONG DBMS</h2><h3>4.1 Checkpoint</h3><p>Checkpoint l√† m·ªëc th·ªùi gian m√† DBMS ghi to√†n b·ªô d·ªØ li·ªáu ƒëang trong b·ªô nh·ªõ (buffer) xu·ªëng ·ªï ƒëƒ©a, gi√∫p gi·∫£m th·ªùi gian ph·ª•c h·ªìi.</p><h3>4.2 Transaction Log (Nh·∫≠t k√Ω giao d·ªãch)</h3><p>DBMS ghi l·∫°i m·ªçi thao t√°c thay ƒë·ªïi d·ªØ li·ªáu (INSERT, UPDATE, DELETE). Khi ph·ª•c h·ªìi, h·ªá th·ªëng ƒë·ªçc log ƒë·ªÉ ho√†n t√°c (UNDO) ho·∫∑c l√†m l·∫°i (REDO) c√°c giao d·ªãch.</p><pre><code>BEGIN TRAN; UPDATE SINHVIEN SET Diem=8; COMMIT;</code></pre><p>Khi h·ªá th·ªëng s·∫≠p gi·ªØa COMMIT, log s·∫Ω ƒë∆∞·ª£c d√πng ƒë·ªÉ x√°c ƒë·ªãnh giao d·ªãch c·∫ßn REDO ho·∫∑c UNDO.</p><hr><h2>5. CHI·∫æN L∆Ø·ª¢C SAO L∆ØU &amp; PH·ª§C H·ªíI</h2><ul><li>K·∫øt h·ª£p Full + Differential + Log ƒë·ªÉ c√¢n b·∫±ng gi·ªØa hi·ªáu nƒÉng v√† ƒë·ªô an to√†n.</li><li>Th·ª±c hi·ªán backup ƒë·ªãnh k·ª≥ h√†ng ng√†y/tu·∫ßn.</li><li>L∆∞u b·∫£n backup tr√™n nhi·ªÅu thi·∫øt b·ªã v√† v·ªã tr√≠ kh√°c nhau (on-site, off-site, cloud).</li><li>Ki·ªÉm tra kh·∫£ nƒÉng kh√¥i ph·ª•c ƒë·ªãnh k·ª≥ b·∫±ng ph·ª•c h·ªìi th·ª≠ (test restore).</li></ul><hr><h2>6. PH·ª§C H·ªíI T·ª∞ ƒê·ªòNG</h2><p>M·ªôt s·ªë DBMS nh∆∞ Oracle, PostgreSQL h·ªó tr·ª£ ph·ª•c h·ªìi t·ª± ƒë·ªông (Automatic Crash Recovery) s·ª≠ d·ª•ng redo log v√† checkpoint ƒë·ªÉ kh√¥i ph·ª•c tr·∫°ng th√°i ·ªïn ƒë·ªãnh m√† kh√¥ng c·∫ßn can thi·ªáp th·ªß c√¥ng.</p><hr><h2>‚úÖ T·ªîNG K·∫æT</h2><ul><li>Backup &amp; Recovery ƒë·∫£m b·∫£o an to√†n d·ªØ li·ªáu khi c√≥ s·ª± c·ªë.</li><li>Full, Differential, Incremental l√† ba chi·∫øn l∆∞·ª£c sao l∆∞u ch√≠nh.</li><li>Checkpoint v√† Transaction Log gi√∫p r√∫t ng·∫Øn th·ªùi gian kh√¥i ph·ª•c.</li><li>Lu√¥n k·∫øt h·ª£p sao l∆∞u ƒë·ªãnh k·ª≥ v·ªõi ki·ªÉm th·ª≠ ph·ª•c h·ªìi ƒë·ªÉ ƒë·∫£m b·∫£o t√≠nh s·∫µn s√†ng.</li></ul>