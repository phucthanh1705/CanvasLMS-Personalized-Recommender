<h1>ğŸ“¡ BÃ€I 7 â€“ Láº¬P TRÃŒNH SOCKET CHO GIAO THá»¨C UDP</h1><h2>7.1 GIá»šI THIá»†U GIAO THá»¨C UDP</h2><p><b>UDP (User Datagram Protocol)</b> lÃ  giao thá»©c táº§ng Transport trong mÃ´ hÃ¬nh TCP/IP, tÆ°Æ¡ng tá»± TCP nhÆ°ng <b>khÃ´ng Ä‘áº£m báº£o Ä‘á»™ tin cáº­y</b>. Dá»¯ liá»‡u Ä‘Æ°á»£c gá»­i theo tá»«ng gÃ³i (datagram) mÃ  khÃ´ng cáº§n thiáº¿t láº­p káº¿t ná»‘i trÆ°á»›c.</p><ul><li>KhÃ´ng cÃ³ cÆ¡ cháº¿ xÃ¡c nháº­n (ACK).</li><li>KhÃ´ng Ä‘áº£m báº£o gÃ³i Ä‘áº¿n Ä‘Ãºng thá»© tá»±.</li><li>Tá»‘c Ä‘á»™ truyá»n nhanh, phÃ¹ há»£p á»©ng dá»¥ng thá»i gian thá»±c.</li></ul><p>âš™ï¸ <b>á»¨ng dá»¥ng thá»±c táº¿:</b> Truyá»n video, Ã¢m thanh, game online, DNS, VoIP.</p><hr><h2>7.2 MÃ” HÃŒNH Gá»¬I â€“ NHáº¬N Dá»® LIá»†U UDP</h2><p>UDP sá»­ dá»¥ng hai lá»›p chÃ­nh trong Java:</p><ul><li><b>DatagramSocket</b>: táº¡o cá»•ng giao tiáº¿p Ä‘á»ƒ gá»­i/nháº­n dá»¯ liá»‡u.</li><li><b>DatagramPacket</b>: Ä‘áº¡i diá»‡n cho má»™t gÃ³i dá»¯ liá»‡u UDP.</li></ul><h3>ğŸ“¦ Cáº¥u trÃºc gÃ³i UDP:</h3><pre><code>| Header (8 bytes) | Data |
Header = Source Port + Destination Port + Length + Checksum</code></pre><hr><h2>7.3 Lá»šP DATAGRAMSOCKET</h2><p><code>DatagramSocket</code> Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ gá»­i hoáº·c nháº­n gÃ³i UDP.</p><pre><code>DatagramSocket socket = new DatagramSocket(); // client
DatagramSocket server = new DatagramSocket(9999); // server</code></pre><p>CÃ¡c phÆ°Æ¡ng thá»©c quan trá»ng:</p><ul><li><code>send(DatagramPacket)</code>: gá»­i gÃ³i dá»¯ liá»‡u.</li><li><code>receive(DatagramPacket)</code>: nháº­n gÃ³i dá»¯ liá»‡u.</li><li><code>close()</code>: Ä‘Ã³ng socket.</li></ul><hr><h2>7.4 Lá»šP DATAGRAMPACKET</h2><p><code>DatagramPacket</code> chá»©a dá»¯ liá»‡u vÃ  Ä‘á»‹a chá»‰ Ä‘Ã­ch.</p><pre><code>byte[] data = "Hello UDP".getBytes();
InetAddress ip = InetAddress.getByName("localhost");
DatagramPacket packet = new DatagramPacket(data, data.length, ip, 9999);
socket.send(packet);</code></pre><p>TrÃªn phÃ­a nháº­n:</p><pre><code>byte[] buffer = new byte[1024];
DatagramPacket packet = new DatagramPacket(buffer, buffer.length);
socket.receive(packet);
String msg = new String(packet.getData(), 0, packet.getLength());
System.out.println("Nháº­n: " + msg);</code></pre><hr><h2>7.5 VÃ Dá»¤ CHÆ¯Æ NG TRÃŒNH UDP</h2><h3>UDP Server</h3><pre><code>import java.net.*;
public class UDPServer {
    public static void main(String[] args) throws Exception {
        DatagramSocket server = new DatagramSocket(9999);
        byte[] buf = new byte[1024];
        System.out.println("Server Ä‘ang chá» dá»¯ liá»‡u UDP...");
        while(true){
            DatagramPacket packet = new DatagramPacket(buf, buf.length);
            server.receive(packet);
            String msg = new String(packet.getData(), 0, packet.getLength());
            System.out.println("Client: " + msg);
            byte[] reply = ("Server nháº­n: " + msg).getBytes();
            DatagramPacket response = new DatagramPacket(reply, reply.length, packet.getAddress(), packet.getPort());
            server.send(response);
        }
    }
}</code></pre><h3>UDP Client</h3><pre><code>import java.net.*;
public class UDPClient {
    public static void main(String[] args) throws Exception {
        DatagramSocket socket = new DatagramSocket();
        InetAddress ip = InetAddress.getByName("localhost");
        byte[] data = "Xin chÃ o UDP Server".getBytes();
        DatagramPacket packet = new DatagramPacket(data, data.length, ip, 9999);
        socket.send(packet);

        byte[] buf = new byte[1024];
        DatagramPacket reply = new DatagramPacket(buf, buf.length);
        socket.receive(reply);
        System.out.println("Server tráº£ lá»i: " + new String(reply.getData(), 0, reply.getLength()));
        socket.close();
    }
}</code></pre><hr><h2>7.6 UDP BROADCAST</h2><p>UDP cho phÃ©p gá»­i dá»¯ liá»‡u Ä‘áº¿n nhiá»u host trong cÃ¹ng máº¡ng qua <b>broadcast address</b> (vÃ­ dá»¥: 192.168.1.255).</p><pre><code>socket.setBroadcast(true);
InetAddress broadcast = InetAddress.getByName("192.168.1.255");
DatagramPacket packet = new DatagramPacket(data, data.length, broadcast, 9999);
socket.send(packet);</code></pre><p>âš ï¸ Cáº§n cáº¥u hÃ¬nh router hoáº·c firewall cho phÃ©p broadcast.</p><hr><h2>7.7 Æ¯U NHÆ¯á»¢C ÄIá»‚M Cá»¦A UDP</h2><p><b>Æ¯u Ä‘iá»ƒm:</b></p><ul><li>Tá»‘c Ä‘á»™ cao, Ä‘á»™ trá»… tháº¥p.</li><li>KhÃ´ng yÃªu cáº§u handshake nhÆ° TCP.</li><li>ThÃ­ch há»£p truyá»n dá»¯ liá»‡u liÃªn tá»¥c.</li></ul><p><b>NhÆ°á»£c Ä‘iá»ƒm:</b></p><ul><li>KhÃ´ng Ä‘áº£m báº£o dá»¯ liá»‡u Ä‘áº¿n Ä‘Ã­ch.</li><li>KhÃ´ng cÃ³ cÆ¡ cháº¿ xÃ¡c nháº­n hoáº·c kiá»ƒm soÃ¡t luá»“ng.</li><li>KhÃ´ng sáº¯p xáº¿p láº¡i gÃ³i tin bá»‹ Ä‘áº£o lá»™n.</li></ul><hr><h2>âœ… Tá»”NG Káº¾T</h2><ul><li>UDP lÃ  giao thá»©c khÃ´ng káº¿t ná»‘i, truyá»n dá»¯ liá»‡u dáº¡ng gÃ³i (datagram).</li><li>Java há»— trá»£ UDP thÃ´ng qua lá»›p <code>DatagramSocket</code> vÃ  <code>DatagramPacket</code>.</li><li>PhÃ¹ há»£p á»©ng dá»¥ng cáº§n tá»‘c Ä‘á»™ hÆ¡n Ä‘á»™ tin cáº­y.</li><li>Cáº§n xá»­ lÃ½ lá»—i vÃ  máº¥t gÃ³i á»Ÿ táº§ng á»©ng dá»¥ng náº¿u cáº§n báº£o Ä‘áº£m.</li></ul>