{
  "title": "B√ÄI 07 ‚Äì REPOSITORY DESIGN PATTERN",
  "created_at": "2025-10-14T07:22:08Z",
  "url": "bai-07-repository-design-pattern",
  "editing_roles": "teachers",
  "page_id": 132,
  "last_edited_by": {
    "id": 1,
    "anonymous_id": "1",
    "display_name": "admin@gmail.com",
    "avatar_image_url": "http://localhost:3000/images/messages/avatar-50.png",
    "html_url": "http://localhost:3000/courses/4/users/1",
    "pronouns": null
  },
  "published": true,
  "hide_from_students": false,
  "front_page": false,
  "html_url": "http://localhost:3000/courses/4/pages/bai-07-repository-design-pattern",
  "todo_date": null,
  "publish_at": null,
  "updated_at": "2025-10-14T07:22:22Z",
  "locked_for_user": false,
  "body": "<h1>üß© B√ÄI 07 ‚Äì REPOSITORY DESIGN PATTERN</h1><h2>üéØ M·ª•c ti√™u h·ªçc t·∫≠p</h2><ul><li>Hi·ªÉu kh√°i ni·ªám v√† vai tr√≤ c·ªßa Repository Pattern trong ph√°t tri·ªÉn ph·∫ßn m·ªÅm hi·ªán ƒë·∫°i.</li><li>N·∫Øm ƒë∆∞·ª£c m√¥ h√¨nh h√≥a, c·∫•u tr√∫c d·ªØ li·ªáu v√† c√°ch t·ªï ch·ª©c m√£ ngu·ªìn theo m√¥ h√¨nh repository.</li><li>√Åp d·ª•ng phong c√°ch l·∫≠p tr√¨nh m√¥-ƒëun h√≥a, t√°ch bi·ªát t·∫ßng d·ªØ li·ªáu (DAL) v√† nghi·ªáp v·ª• (Service).</li><li>Bi·∫øt c√°ch ƒë√°nh gi√°, ki·ªÉm th·ª≠ v√† t·ªëi ∆∞u thi·∫øt k·∫ø theo nguy√™n t·∫Øc SOLID v√† Clean Architecture.</li></ul><hr><h2>7.1 KH√ÅI NI·ªÜM</h2><h3>7.1.1 Gi·ªõi thi·ªáu</h3><p><b>Repository Pattern</b> l√† m·∫´u thi·∫øt k·∫ø gi√∫p t√°ch bi·ªát logic truy xu·∫•t d·ªØ li·ªáu kh·ªèi nghi·ªáp v·ª•, cung c·∫•p l·ªõp trung gian gi·ªØa t·∫ßng Service v√† Database.</p><pre><code>Service Layer  ‚Üí  Repository Layer  ‚Üí  Database</code></pre><p>M·ª•c ti√™u: gi·∫£m s·ª± ph·ª• thu·ªôc v√†o ORM ho·∫∑c DB c·ª• th·ªÉ, gi√∫p d·ªÖ b·∫£o tr√¨ v√† thay ƒë·ªïi ngu·ªìn d·ªØ li·ªáu (SQL, NoSQL, API,...).</p><h3>7.1.2 M√¥ h√¨nh h√≥a</h3><p>M·ªói repository ƒë·∫°i di·ªán cho m·ªôt t·∫≠p h·ª£p ƒë·ªëi t∆∞·ª£ng (Entity) v√† cung c·∫•p c√°c ph∆∞∆°ng th·ª©c CRUD chu·∫©n h√≥a:</p><pre><code>interface IRepository {    T findById(int id);    List findAll();    void save(T entity);    void update(T entity);    void delete(int id);}</code></pre><p>Tri·ªÉn khai c·ª• th·ªÉ s·∫Ω ph·ª• thu·ªôc v√†o c√¥ng ngh·ªá (JPA, Hibernate, Spring Data, ho·∫∑c JDBC thu·∫ßn).</p><h3>7.1.3 Thi·∫øt k·∫ø d·ªØ li·ªáu</h3><ul><li>X√°c ƒë·ªãnh c√°c <b>Entity</b> ch√≠nh trong h·ªá th·ªëng (VD: User, Product, Order,...).</li><li>M·ªói entity c√≥ repository t∆∞∆°ng ·ª©ng.</li><li>Repository ch·ªâ giao ti·∫øp v·ªõi t·∫ßng d·ªØ li·ªáu, kh√¥ng x·ª≠ l√Ω nghi·ªáp v·ª•.</li></ul><p><b>V√≠ d·ª•:</b></p><pre><code>public interface UserRepository {    User findByEmail(String email);    List findActiveUsers();}</code></pre><h3>7.1.4 C·∫•u tr√∫c ch∆∞∆°ng tr√¨nh v·ªõi m√¥ h√¨nh Repository</h3><pre><code>src/ ‚îú‚îÄ model/ ‚îÇ   ‚îî‚îÄ User.java ‚îú‚îÄ repository/ ‚îÇ   ‚îî‚îÄ UserRepository.java ‚îú‚îÄ service/ ‚îÇ   ‚îî‚îÄ UserService.java ‚îî‚îÄ controller/     ‚îî‚îÄ UserController.java</code></pre><p>C·∫•u tr√∫c n√†y gi√∫p t√°ch bi·ªát vai tr√≤ v√† d·ªÖ ki·ªÉm th·ª≠ t·ª´ng t·∫ßng ƒë·ªôc l·∫≠p.</p><hr><h2>7.2 M·ªòT S·ªê K·ª∏ THU·∫¨T PHONG C√ÅCH L·∫¨P TR√åNH</h2><h3>7.2.1 M·ªôt s·ªë ƒë·ªÅ ngh·ªã phong c√°ch l·∫≠p tr√¨nh</h3><ul><li>Tu√¢n th·ªß nguy√™n t·∫Øc <b>Single Responsibility</b>.</li><li>Kh√¥ng vi·∫øt truy v·∫•n SQL tr·ª±c ti·∫øp trong Service.</li><li>Repository ch·ªâ n√™n tr·∫£ d·ªØ li·ªáu, kh√¥ng x·ª≠ l√Ω logic.</li></ul><h3>7.2.2 M√¥i tr∆∞·ªùng l·∫≠p tr√¨nh</h3><p>√Åp d·ª•ng framework h·ªó tr·ª£ nh∆∞ <b>Spring Data JPA</b>, <b>Hibernate</b>, ho·∫∑c <b>Entity Framework</b> ƒë·ªÉ gi·∫£m code l·∫∑p.</p><h3>7.2.3 Ti√™u ch√≠ m√¥-ƒëun h√≥a</h3><ul><li>T√°ch bi·ªát r√µ t·∫ßng Model, Repository, Service, Controller.</li><li>Repository ph·∫£i c√≥ interface ƒë·ªÉ d·ªÖ mock trong Unit Test.</li></ul><h3>7.2.4 Ti√™u ch√≠ c·∫•u tr√∫c d·ªØ li·ªáu</h3><p>D·ªØ li·ªáu c·∫ßn √°nh x·∫° ch√≠nh x√°c gi·ªØa Entity v√† b·∫£ng trong CSDL.</p><p>S·ª≠ d·ª•ng ORM mapping v·ªõi annotation: <code>@Entity, @Table, @Column</code>.</p><h3>7.2.5 V√≠ d·ª• minh h·ªça</h3><pre><code>@Entity@Table(name = \\\"users\\\")public class User {  @Id @GeneratedValue  private int id;  private String email;  private boolean active;}@Repositorypublic interface UserRepository extends JpaRepository {  List findByActiveTrue();}</code></pre><hr><h2>7.3 ƒê√ÅNH GI√Å CH·∫§T L∆Ø·ª¢NG C√îNG VI·ªÜC</h2><h3>7.3.1 Hi·ªán th·ª±c tƒÉng c∆∞·ªùng</h3><p>C√≥ th·ªÉ m·ªü r·ªông repository b·∫±ng c√°ch th√™m caching (Redis), logging, ho·∫∑c validation.</p><h3>7.3.2 ƒê√°nh gi√° l·∫°i thi·∫øt k·∫ø v√† ch∆∞∆°ng tr√¨nh (Design &amp; Code Review)</h3><ul><li>Ki·ªÉm tra kh·∫£ nƒÉng t√°i s·ª≠ d·ª•ng repository.</li><li>ƒê·∫£m b·∫£o code tu√¢n th·ªß chu·∫©n naming v√† logic clean code.</li><li>ƒê√°nh gi√° kh·∫£ nƒÉng thay th·∫ø DB (SQL ‚Üî NoSQL).</li></ul><h3>7.3.3 Ki·ªÉm th·ª≠ v√† b·∫£o tr√¨</h3><ul><li>Vi·∫øt Unit Test cho t·ª´ng repository (mock DB).</li><li>T√≠ch h·ª£p CI/CD ƒë·ªÉ test t·ª± ƒë·ªông.</li><li>B·∫£o tr√¨ d·ªÖ d√†ng khi thay ƒë·ªïi c√¥ng ngh·ªá d·ªØ li·ªáu (Mongo, PostgreSQL,...).</li></ul><hr><h2>‚úÖ T·ªïng k·∫øt</h2><ul><li>Repository Pattern gi√∫p t√°ch bi·ªát t·∫ßng d·ªØ li·ªáu kh·ªèi nghi·ªáp v·ª•, tƒÉng kh·∫£ nƒÉng b·∫£o tr√¨ v√† test.</li><li>√Åp d·ª•ng t·ªët m√¥ h√¨nh n√†y gi√∫p d·ª± √°n tu√¢n th·ªß SOLID v√† Clean Architecture.</li><li>ƒê√¢y l√† n·ªÅn t·∫£ng quan tr·ªçng cho h·ªá th·ªëng l·ªõn, k·∫øt h·ª£p t·ªët v·ªõi Service Layer v√† Dependency Injection.</li></ul>"
}