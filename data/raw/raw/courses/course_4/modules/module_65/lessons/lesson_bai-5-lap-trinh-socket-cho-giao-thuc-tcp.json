{
  "title": "BÃ€I 5 â€“ Láº¬P TRÃŒNH SOCKET CHO GIAO THá»¨C TCP",
  "created_at": "2025-10-25T13:45:52Z",
  "url": "bai-5-lap-trinh-socket-cho-giao-thuc-tcp",
  "editing_roles": "teachers",
  "page_id": 292,
  "last_edited_by": {
    "id": 1,
    "anonymous_id": "1",
    "display_name": "admin@gmail.com",
    "avatar_image_url": "http://localhost:3000/images/messages/avatar-50.png",
    "html_url": "http://localhost:3000/courses/4/users/1",
    "pronouns": null
  },
  "published": true,
  "hide_from_students": false,
  "front_page": false,
  "html_url": "http://localhost:3000/courses/4/pages/bai-5-lap-trinh-socket-cho-giao-thuc-tcp",
  "todo_date": null,
  "publish_at": null,
  "updated_at": "2025-10-25T13:46:07Z",
  "locked_for_user": false,
  "body": "<h1>ğŸ”Œ BÃ€I 5 â€“ Láº¬P TRÃŒNH SOCKET CHO GIAO THá»¨C TCP</h1><h2>5.1 MÃ” HÃŒNH KHÃCH â€“ CHá»¦ (CLIENT/SERVER)</h2><p>Trong mÃ´ hÃ¬nh <b>Client/Server</b>, má»™t mÃ¡y chá»§ (Server) cung cáº¥p dá»‹ch vá»¥ cho nhiá»u mÃ¡y khÃ¡ch (Client). Giao thá»©c TCP (Transmission Control Protocol) Ä‘Æ°á»£c dÃ¹ng phá»• biáº¿n vÃ¬ Ä‘áº£m báº£o <b>truyá»n dá»¯ liá»‡u tin cáº­y, cÃ³ thá»© tá»±, khÃ´ng máº¥t mÃ¡t</b>.</p><p><b>Äáº·c Ä‘iá»ƒm cá»§a TCP:</b></p><ul><li>HÆ°á»›ng káº¿t ná»‘i (connection-oriented)</li><li>Báº£o Ä‘áº£m Ä‘á»™ tin cáº­y (reliable)</li><li>PhÃ¢n máº£nh dá»¯ liá»‡u thÃ nh gÃ³i nhá», sáº¯p xáº¿p Ä‘Ãºng thá»© tá»± khi nháº­n</li></ul><h3>ğŸ” Chu trÃ¬nh hoáº¡t Ä‘á»™ng:</h3><ol><li>Server táº¡o socket láº¯ng nghe (ServerSocket)</li><li>Client gá»­i yÃªu cáº§u káº¿t ná»‘i (Socket)</li><li>Server cháº¥p nháº­n káº¿t ná»‘i</li><li>Hai bÃªn trao Ä‘á»•i dá»¯ liá»‡u qua luá»“ng I/O</li></ol><hr><h2>5.2 MÃ” HÃŒNH TRUYá»€N TIN SOCKET</h2><p>Socket lÃ  Ä‘iá»ƒm cuá»‘i (endpoint) cá»§a má»™t káº¿t ná»‘i máº¡ng giá»¯a hai tiáº¿n trÃ¬nh.</p><p><b>Cáº¥u trÃºc má»™t káº¿t ná»‘i TCP:</b></p><pre><code>Client Socket = (IP_Client, Port_Client)\nServer Socket = (IP_Server, Port_Server)</code></pre><p>Má»—i cáº·p Ä‘á»‹a chá»‰ IP vÃ  port xÃ¡c Ä‘á»‹nh má»™t phiÃªn truyá»n thÃ´ng duy nháº¥t.</p><h3>ğŸ“¡ QuÃ¡ trÃ¬nh thiáº¿t láº­p káº¿t ná»‘i TCP (3-Way Handshake):</h3><ol><li>Client gá»­i SYN Ä‘áº¿n Server</li><li>Server tráº£ lá»i SYN-ACK</li><li>Client gá»­i ACK â†’ káº¿t ná»‘i Ä‘Æ°á»£c thiáº¿t láº­p</li></ol><hr><h2>5.3 Lá»šP SOCKET TRONG JAVA</h2><p>Lá»›p <code>Socket</code> thuá»™c gÃ³i <code>java.net</code>, dÃ¹ng Ä‘á»ƒ táº¡o vÃ  quáº£n lÃ½ káº¿t ná»‘i TCP.</p><pre><code>import java.net.*;\nimport java.io.*;\n\npublic class TCPClient {\n    public static void main(String[] args) throws Exception {\n        Socket socket = new Socket(\"localhost\", 8080);\n        PrintWriter out = new PrintWriter(socket.getOutputStream(), true);\n        BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));\n        out.println(\"Xin chÃ o Server!\");\n        System.out.println(\"Pháº£n há»“i: \" + in.readLine());\n        socket.close();\n    }\n}</code></pre><p><b>CÃ¡c phÆ°Æ¡ng thá»©c quan trá»ng:</b></p><ul><li><code>getInputStream()</code>: Ä‘á»c dá»¯ liá»‡u tá»« server</li><li><code>getOutputStream()</code>: gá»­i dá»¯ liá»‡u tá»›i server</li><li><code>close()</code>: Ä‘Ã³ng káº¿t ná»‘i</li><li><code>getInetAddress()</code>: láº¥y Ä‘á»‹a chá»‰ server</li></ul><hr><h2>5.4 Lá»šP SERVERSOCKET</h2><p><code>ServerSocket</code> lÃ  lá»›p cho phÃ©p táº¡o socket láº¯ng nghe yÃªu cáº§u tá»« client.</p><pre><code>import java.net.*;\nimport java.io.*;\n\npublic class TCPServer {\n    public static void main(String[] args) throws Exception {\n        ServerSocket server = new ServerSocket(8080);\n        System.out.println(\"Server Ä‘ang láº¯ng nghe...\");\n        Socket socket = server.accept(); // Chá» client káº¿t ná»‘i\n        BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));\n        PrintWriter out = new PrintWriter(socket.getOutputStream(), true);\n        String msg = in.readLine();\n        System.out.println(\"Client: \" + msg);\n        out.println(\"ChÃ o client, tÃ´i lÃ  server!\");\n        socket.close();\n        server.close();\n    }\n}</code></pre><p><b>PhÆ°Æ¡ng thá»©c chÃ­nh:</b></p><ul><li><code>accept()</code>: chá» káº¿t ná»‘i tá»« client.</li><li><code>close()</code>: Ä‘Ã³ng socket server.</li><li><code>getLocalPort()</code>: láº¥y port mÃ  server Ä‘ang láº¯ng nghe.</li></ul><p>Má»—i khi client káº¿t ná»‘i, Server táº¡o má»™t <code>Socket</code> má»›i Ä‘á»ƒ trao Ä‘á»•i dá»¯ liá»‡u riÃªng biá»‡t.</p><hr><h2>5.5 VÃ Dá»¤ HOÃ€N CHá»ˆNH</h2><h3>Server Ä‘a luá»“ng</h3><pre><code>class ClientHandler extends Thread {\n    private Socket socket;\n    public ClientHandler(Socket s) { this.socket = s; }\n    public void run() {\n        try {\n            BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));\n            PrintWriter out = new PrintWriter(socket.getOutputStream(), true);\n            String msg = in.readLine();\n            System.out.println(\"Client gá»­i: \" + msg);\n            out.println(\"Server nháº­n: \" + msg.toUpperCase());\n            socket.close();\n        } catch(Exception e) { e.printStackTrace(); }\n    }\n}\n\npublic class MultiServer {\n    public static void main(String[] args) throws Exception {\n        ServerSocket server = new ServerSocket(8080);\n        System.out.println(\"Server cháº¡y cá»•ng 8080\");\n        while(true) {\n            Socket s = server.accept();\n            new ClientHandler(s).start();\n        }\n    }\n}</code></pre><p>âœ… <b>Æ¯u Ä‘iá»ƒm cá»§a mÃ´ hÃ¬nh Ä‘a luá»“ng:</b></p><ul><li>Há»— trá»£ nhiá»u client cÃ¹ng lÃºc.</li><li>KhÃ´ng cháº·n (blocking) server chÃ­nh.</li></ul><hr><h2>âœ… Tá»”NG Káº¾T</h2><ul><li>TCP Ä‘áº£m báº£o truyá»n dá»¯ liá»‡u tin cáº­y vÃ  cÃ³ thá»© tá»±.</li><li>Lá»›p <code>Socket</code> dÃ¹ng cho client, <code>ServerSocket</code> cho server.</li><li>Dá»¯ liá»‡u Ä‘Æ°á»£c gá»­i/nháº­n qua luá»“ng <code>InputStream</code> vÃ  <code>OutputStream</code>.</li><li>Hiá»ƒu mÃ´ hÃ¬nh Client/Server lÃ  ná»n táº£ng Ä‘á»ƒ xÃ¢y dá»±ng á»©ng dá»¥ng máº¡ng thá»±c táº¿.</li></ul>"
}